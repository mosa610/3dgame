//
// Generated by Microsoft (R) HLSL Shader Compiler 10.1
//
//
// Buffer Definitions: 
//
// cbuffer SCENE_CONSTANT_BUFFER
// {
//
//   float4 options;                    // Offset:    0 Size:    16 [unused]
//   float4 z_buffer_parameteres;       // Offset:   16 Size:    16
//   float4 camera_position;            // Offset:   32 Size:    16
//   float4 camera_direction;           // Offset:   48 Size:    16 [unused]
//   float4 camera_clip_distance;       // Offset:   64 Size:    16 [unused]
//   float4 viewport_size;              // Offset:   80 Size:    16 [unused]
//   row_major float4x4 view_transform; // Offset:   96 Size:    64 [unused]
//   row_major float4x4 projection_transform;// Offset:  160 Size:    64 [unused]
//   row_major float4x4 view_projection_transform;// Offset:  224 Size:    64 [unused]
//   row_major float4x4 inverse_view_transform;// Offset:  288 Size:    64 [unused]
//   row_major float4x4 inverse_projection_transform;// Offset:  352 Size:    64 [unused]
//   row_major float4x4 inverse_view_projection_transform;// Offset:  416 Size:    64
//   row_major float4x4 previous_view_projection_transform;// Offset:  480 Size:    64 [unused]
//
// }
//
//
// Resource Bindings:
//
// Name                                 Type  Format         Dim      HLSL Bind  Count
// ------------------------------ ---------- ------- ----------- -------------- ------
// sampler_states[0]                 sampler      NA          NA             s0      1 
// sampler_states[1]                 sampler      NA          NA             s1      1 
// gbuffer_base_color                texture  float4          2d             t0      1 
// gbuffer_emissive_color            texture  float4          2d             t1      1 
// gbuffer_normal                    texture  float4          2d             t2      1 
// gbuffer_parameter                 texture  float4          2d             t3      1 
// gbuffer_depth                     texture   float          2d             t4      1 
// diffuse_iem                       texture  float4        cube            t33      1 
// specular_pmrem                    texture  float4        cube            t34      1 
// lut_ggx                           texture  float4          2d            t35      1 
// SCENE_CONSTANT_BUFFER             cbuffer      NA          NA            cb1      1 
//
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_POSITION              0   xyzw        0      POS   float       
// COLOR                    0   xyzw        1     NONE   float       
// TEXCOORD                 0   xy          2     NONE   float   xy  
//
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// SV_TARGET                0   xyzw        0   TARGET   float   xyzw
//
ps_5_0
dcl_globalFlags refactoringAllowed | skipOptimization
dcl_constantbuffer CB1[30], immediateIndexed
dcl_sampler s0, mode_default
dcl_sampler s1, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t3
dcl_resource_texture2d (float,float,float,float) t4
dcl_resource_texturecube (float,float,float,float) t33
dcl_resource_texturecube (float,float,float,float) t34
dcl_resource_texture2d (float,float,float,float) t35
dcl_input_ps linear v2.xy
dcl_output o0.xyzw
dcl_temps 11
//
// Initial variable locations:
//   v0.x <- pin.position.x; v0.y <- pin.position.y; v0.z <- pin.position.z; v0.w <- pin.position.w; 
//   v1.x <- pin.color.x; v1.y <- pin.color.y; v1.z <- pin.color.z; v1.w <- pin.color.w; 
//   v2.x <- pin.texcoord.x; v2.y <- pin.texcoord.y; 
//   o0.x <- <main return value>.x; o0.y <- <main return value>.y; o0.z <- <main return value>.z; o0.w <- <main return value>.w
//
#line 24 "D:\ライブラリ\3dgame\HLSL\deferred\deferred_rendering_indirect_ps.hlsl"
nop 

#line 25
nop 

#line 26
nop 

#line 27
nop 

#line 28
nop 

#line 29
nop 

#line 30
nop 

#line 32
nop 
mov r0.xy, v2.xyxx
mov r1.x, cb1[26].x
mov r2.x, cb1[26].y
mov r3.x, cb1[26].z
mov r4.x, cb1[26].w
mov r1.y, cb1[27].x
mov r2.y, cb1[27].y
mov r3.y, cb1[27].z
mov r4.y, cb1[27].w
mov r1.z, cb1[28].x
mov r2.z, cb1[28].y
mov r3.z, cb1[28].z
mov r4.z, cb1[28].w
mov r5.xyzw, cb1[29].xyzw
mov r0.zw, cb1[1].xxxy

#line 97 "D:\ライブラリ\3dgame\HLSL\deferred\gbuffer.hlsli"
sample_indexable(texture2d)(float,float,float,float) r6.xyzw, v2.xyxx, t0.xyzw, s0  // r6.x <- base_color.x; r6.y <- base_color.y; r6.z <- base_color.z; r6.w <- base_color.w

#line 98
sample_indexable(texture2d)(float,float,float,float) r7.xyz, v2.xyxx, t1.xyzw, s0  // r7.x <- emissive_color.x; r7.y <- emissive_color.y; r7.z <- emissive_color.z

#line 99
sample_indexable(texture2d)(float,float,float,float) r8.xyz, v2.xyxx, t2.xyzw, s0
mov r8.xyz, r8.xyzx  // r8.x <- normal.x; r8.y <- normal.y; r8.z <- normal.z

#line 100
sample_indexable(texture2d)(float,float,float,float) r9.xyzw, v2.xyxx, t3.yzxw, s0  // r9.z <- parameter.x; r9.x <- parameter.y; r9.y <- parameter.z; r9.w <- parameter.w

#line 101
sample_indexable(texture2d)(float,float,float,float) r7.w, v2.xyxx, t4.yzwx, s0
mov r7.w, r7.w  // r7.w <- linear_depth

#line 105
mov r6.xyz, r6.xyzx  // r6.x <- ret.base_color.x; r6.y <- ret.base_color.y; r6.z <- ret.base_color.z

#line 106
mul r6.w, r6.w, l(32.000000)
add r6.w, r6.w, l(0.500000)
ftoi r6.w, r6.w  // r6.w <- ret.shading_model

#line 107
mov r7.xyz, r7.xyzx  // r7.x <- ret.emissive_color.x; r7.y <- ret.emissive_color.y; r7.z <- ret.emissive_color.z

#line 108
mov r8.xyz, r8.xyzx  // r8.x <- ret.w_normal.x; r8.y <- ret.w_normal.y; r8.z <- ret.w_normal.z

#line 109
mov r9.z, r9.z  // r9.z <- ret.occlusion_factor

#line 110
mov r9.x, r9.x  // r9.x <- ret.roughness

#line 111
mov r9.y, r9.y  // r9.y <- ret.metalness

#line 112
mov r9.w, r9.w  // r9.w <- ret.occlusion_strength

#line 115
mul r0.xy, r0.xyxx, l(2.000000, -2.000000, 0.000000, 0.000000)
add r10.xy, r0.xyxx, l(-1.000000, 1.000000, 0.000000, 0.000000)  // r10.x <- position.x; r10.y <- position.y
nop 
mov r7.w, r7.w
mov r0.zw, r0.zzzw

#line 66
div r0.x, l(1.000000), r7.w
mov r0.y, -r0.w
add r0.x, r0.y, r0.x
div r10.z, r0.x, r0.z  // r10.z <- <convert_linear_depth_to_projection_depth return value>

#line 115
itof r10.w, l(1)  // r10.w <- position.w
mov r10.z, r10.z  // r10.z <- position.z

#line 116
mov r1.w, r5.x
dp4 r0.y, r10.xyzw, r1.xyzw  // r0.y <- position.x
mov r2.w, r5.y
dp4 r0.z, r10.xyzw, r2.xyzw  // r0.z <- position.y
mov r3.w, r5.z
dp4 r0.w, r10.xyzw, r3.xyzw  // r0.w <- position.z
mov r4.w, r5.w
dp4 r0.x, r10.xyzw, r4.xyzw  // r0.x <- position.w

#line 117
div r0.xyz, r0.yzwy, r0.xxxx  // r0.x <- ret.w_position.x; r0.y <- ret.w_position.y; r0.z <- ret.w_position.z

#line 118
mov r9.x, r9.x  // r9.x <- <DecodeGBuffer return value>.roughness
mov r9.y, r9.y  // r9.y <- <DecodeGBuffer return value>.metalness
mov r9.z, r9.z  // r9.z <- <DecodeGBuffer return value>.occlusion_factor
mov r9.w, r9.w  // r9.w <- <DecodeGBuffer return value>.occlusion_strength
mov r6.xyz, r6.xyzx  // r6.x <- <DecodeGBuffer return value>.base_color.x; r6.y <- <DecodeGBuffer return value>.base_color.y; r6.z <- <DecodeGBuffer return value>.base_color.z
mov r7.xyz, r7.xyzx  // r7.x <- <DecodeGBuffer return value>.emissive_color.x; r7.y <- <DecodeGBuffer return value>.emissive_color.y; r7.z <- <DecodeGBuffer return value>.emissive_color.z
mov r8.xyz, r8.xyzx  // r8.x <- <DecodeGBuffer return value>.w_normal.x; r8.y <- <DecodeGBuffer return value>.w_normal.y; r8.z <- <DecodeGBuffer return value>.w_normal.z
mov r6.w, r6.w  // r6.w <- <DecodeGBuffer return value>.shading_model
mov r0.xyz, r0.xyzx  // r0.x <- <DecodeGBuffer return value>.w_position.x; r0.y <- <DecodeGBuffer return value>.w_position.y; r0.z <- <DecodeGBuffer return value>.w_position.z

#line 32 "D:\ライブラリ\3dgame\HLSL\deferred\deferred_rendering_indirect_ps.hlsl"
mov r6.xyz, r6.xyzx  // r6.x <- data.base_color.x; r6.y <- data.base_color.y; r6.z <- data.base_color.z
mov r7.xyz, r7.xyzx  // r7.x <- data.emissive_color.x; r7.y <- data.emissive_color.y; r7.z <- data.emissive_color.z
mov r8.xyz, r8.xyzx  // r8.x <- data.w_normal.x; r8.y <- data.w_normal.y; r8.z <- data.w_normal.z
mov r0.xyz, r0.xyzx  // r0.x <- data.w_position.x; r0.y <- data.w_position.y; r0.z <- data.w_position.z
mov r6.w, r6.w  // r6.w <- data.shading_model
mov r9.xyzw, r9.xyzw  // r9.x <- data.roughness; r9.y <- data.metalness; r9.z <- data.occlusion_factor; r9.w <- data.occlusion_strength

#line 34
itof r1.xyz, l(0, 0, 0, 0)  // r1.x <- total_diffuse.x; r1.y <- total_diffuse.y; r1.z <- total_diffuse.z
itof r2.xyz, l(0, 0, 0, 0)  // r2.x <- total_specular.x; r2.y <- total_specular.y; r2.z <- total_specular.z

#line 35
if_nz r6.w

#line 37
  mov r6.xyz, r6.xyzx  // r6.x <- albedo.x; r6.y <- albedo.y; r6.z <- albedo.z

#line 39
  dp3 r0.w, r8.xyzx, r8.xyzx
  rsq r0.w, r0.w
  mul r3.xyz, r0.wwww, r8.xyzx  // r3.x <- N.x; r3.y <- N.y; r3.z <- N.z

#line 40
  mov r4.xyz, -cb1[2].xyzx
  add r0.xyz, r0.xyzx, r4.xyzx
  dp3 r0.w, r0.xyzx, r0.xyzx
  rsq r0.w, r0.w
  mul r0.xyz, r0.wwww, r0.xyzx  // r0.x <- V.x; r0.y <- V.y; r0.z <- V.z

#line 43
  mov r4.xyz, -r6.xyzx
  add r4.xyz, r4.xyzx, l(0.000000, 0.000000, 0.000000, 0.000000)
  mul r4.xyz, r4.xyzx, r9.yyyy
  add r4.xyz, r4.xyzx, r6.xyzx  // r4.x <- diffuse_reflectance.x; r4.y <- diffuse_reflectance.y; r4.z <- diffuse_reflectance.z

#line 46
  mov r5.xyz, l(-0.040000,-0.040000,-0.040000,-0.000000)
  add r5.xyz, r5.xyzx, r6.xyzx
  mul r5.xyz, r5.xyzx, r9.yyyy
  add r5.xyz, r5.xyzx, l(0.040000, 0.040000, 0.040000, 0.000000)  // r5.x <- F0.x; r5.y <- F0.y; r5.z <- F0.z

#line 51
  nop 
  mov r3.xyz, r3.xyzx
  mov r0.xyz, r0.xyzx
  mov r0.w, r9.x
  mov r4.xyz, r4.xyzx
  mov r5.xyz, r5.xyzx
  nop 
  nop 

#line 292 "D:\ライブラリ\3dgame\HLSL\shading_functions.hlsli"
  mov r6.xyz, r3.xyzx  // r6.x <- N.x; r6.y <- N.y; r6.z <- N.z

#line 293
  mov r8.xyz, -r0.xyzx  // r8.x <- V.x; r8.y <- V.y; r8.z <- V.z

#line 296
  dp3 r1.w, r6.xyzx, r8.xyzx
  max r1.w, r1.w, l(0.000100)  // r1.w <- NdotV

#line 297
  nop 
  mov r5.xyz, r5.xyzx
  mov r1.w, r1.w
  mov r0.w, r0.w

#line 277
  mov r0.w, -r0.w
  add r0.w, r0.w, l(1.000000)
  max r8.xyz, r5.xyzx, r0.wwww
  mov r10.xyz, -r5.xyzx
  add r8.xyz, r8.xyzx, r10.xyzx
  mov r0.w, -r1.w
  add r0.w, r0.w, l(1.000000)
  max r0.w, r0.w, l(0.000000)
  min r0.w, r0.w, l(1.000000)
  mov r1.w, l(1.000000)
  mul r1.w, r0.w, r1.w
  mul r0.w, r0.w, r0.w
  mul r0.w, r0.w, r0.w
  mul r0.w, r0.w, r1.w
  mul r8.xyz, r0.wwww, r8.xyzx
  add r8.xyz, r5.xyzx, r8.xyzx  // r8.x <- <CalcFresnelRoughness return value>.x; r8.y <- <CalcFresnelRoughness return value>.y; r8.z <- <CalcFresnelRoughness return value>.z

#line 297
  mov r8.xyz, -r8.xyzx
  add r8.xyz, r8.xyzx, l(1.000000, 1.000000, 1.000000, 0.000000)  // r8.x <- kD.x; r8.y <- kD.y; r8.z <- kD.z

#line 299
  nop 
  mov r6.xyz, r6.xyzx

#line 250
  sample_indexable(texturecube)(float,float,float,float) r6.xyz, r6.xyzx, t33.xyzw, s1  // r6.x <- <SampleDiffuseIEM return value>.x; r6.y <- <SampleDiffuseIEM return value>.y; r6.z <- <SampleDiffuseIEM return value>.z

#line 299
  mov r6.xyz, r6.xyzx  // r6.x <- irradiance.x; r6.y <- irradiance.y; r6.z <- irradiance.z

#line 300
  mul r4.xyz, r4.xyzx, r6.xyzx
  mul r4.xyz, r8.xyzx, r4.xyzx  // r4.x <- <DiffuseIBL return value>.x; r4.y <- <DiffuseIBL return value>.y; r4.z <- <DiffuseIBL return value>.z

#line 51 "D:\ライブラリ\3dgame\HLSL\deferred\deferred_rendering_indirect_ps.hlsl"
  add r4.xyz, r1.xyzx, r4.xyzx  // r4.x <- total_diffuse.x; r4.y <- total_diffuse.y; r4.z <- total_diffuse.z

#line 52
  nop 
  mov r3.xyz, r3.xyzx
  mov r0.xyz, r0.xyzx
  mov r9.x, r9.x
  mov r5.xyz, r5.xyzx
  nop 
  nop 
  nop 

#line 315 "D:\ライブラリ\3dgame\HLSL\shading_functions.hlsli"
  mov r3.xyz, r3.xyzx  // r3.x <- N.x; r3.y <- N.y; r3.z <- N.z

#line 316
  mov r0.xyz, -r0.xyzx  // r0.x <- V.x; r0.y <- V.y; r0.z <- V.z

#line 318
  dp3 r0.w, r3.xyzx, r0.xyzx
  max r9.y, r0.w, l(0.000100)  // r9.y <- NdotV

#line 319
  mov r0.xyz, -r0.xyzx
  dp3 r0.w, r0.xyzx, r3.xyzx
  add r0.w, r0.w, r0.w
  mov r0.w, -r0.w
  mul r3.xyz, r0.wwww, r3.xyzx
  add r0.xyz, r0.xyzx, r3.xyzx
  dp3 r0.w, r0.xyzx, r0.xyzx
  rsq r0.w, r0.w
  mul r0.xyz, r0.wwww, r0.xyzx  // r0.x <- R.x; r0.y <- R.y; r0.z <- R.z

#line 320
  nop 
  mov r0.xyz, r0.xyzx
  mov r9.x, r9.x

#line 264
  resinfo_indexable(texturecube)(float,float,float,float)_uint r0.w, l(0), t34.xyzw  // r0.w <- mip_maps

#line 265
  mov r1.w, l(1)
  ineg r1.w, r1.w
  iadd r0.w, r0.w, r1.w
  utof r0.w, r0.w
  mul r0.w, r0.w, r9.x  // r0.w <- lod

#line 266
  sample_l_indexable(texturecube)(float,float,float,float) r0.xyz, r0.xyzx, t34.xyzw, s1, r0.w  // r0.x <- <SampleSpecularPMREM return value>.x; r0.y <- <SampleSpecularPMREM return value>.y; r0.z <- <SampleSpecularPMREM return value>.z

#line 320
  mov r0.xyz, r0.xyzx  // r0.x <- specular_light.x; r0.y <- specular_light.y; r0.z <- specular_light.z

#line 322
  max r3.xy, r9.yxyy, l(0.000000, 0.000000, 0.000000, 0.000000)
  min r3.xy, r3.xyxx, l(1.000000, 1.000000, 0.000000, 0.000000)  // r3.x <- brdf_sample_point.x; r3.y <- brdf_sample_point.y

#line 323
  nop 
  mov r3.xy, r3.xyxx

#line 239
  sample_indexable(texture2d)(float,float,float,float) r3.xy, r3.xyxx, t35.xyzw, s1  // r3.x <- <SampleLutGGX return value>.x; r3.y <- <SampleLutGGX return value>.y

#line 323
  mov r3.xy, r3.xyxx  // r3.x <- env_brdf.x; r3.y <- env_brdf.y

#line 324
  mul r3.xzw, r3.xxxx, r5.xxyz
  add r3.xyz, r3.yyyy, r3.xzwx
  mul r0.xyz, r0.xyzx, r3.xyzx  // r0.x <- <SpecularIBL return value>.x; r0.y <- <SpecularIBL return value>.y; r0.z <- <SpecularIBL return value>.z

#line 52 "D:\ライブラリ\3dgame\HLSL\deferred\deferred_rendering_indirect_ps.hlsl"
  add r0.xyz, r0.xyzx, r2.xyzx  // r0.x <- total_specular.x; r0.y <- total_specular.y; r0.z <- total_specular.z

#line 55
  mul r3.xyz, r9.zzzz, r4.xyzx
  mov r5.xyz, -r4.xyzx
  add r3.xyz, r3.xyzx, r5.xyzx
  mul r3.xyz, r3.xyzx, r9.wwww
  add r1.xyz, r3.xyzx, r4.xyzx  // r1.x <- total_diffuse.x; r1.y <- total_diffuse.y; r1.z <- total_diffuse.z

#line 56
  mul r3.xyz, r9.zzzz, r0.xyzx
  mov r4.xyz, -r0.xyzx
  add r3.xyz, r3.xyzx, r4.xyzx
  mul r3.xyz, r3.xyzx, r9.wwww
  add r2.xyz, r0.xyzx, r3.xyzx  // r2.x <- total_specular.x; r2.y <- total_specular.y; r2.z <- total_specular.z

#line 57
endif 

#line 59
add r0.xyz, r1.xyzx, r2.xyzx
add o0.xyz, r7.xyzx, r0.xyzx
itof o0.w, l(1)
ret 
// Approximately 193 instruction slots used
